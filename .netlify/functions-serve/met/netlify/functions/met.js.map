{
  "version": 3,
  "sources": ["../../home/amz/Northcoders/projects/nc_exhibition-curator/netlify/functions/met.js"],
  "sourceRoot": "/tmp/tmp-950757-JaFbKZlcQBI3",
  "sourcesContent": ["// Proxy Met API with Netlify Function (a serverless function) to resolve CORS issue on objectID\n\nexport async function handler(event) {\n  const id = event.queryStringParameters?.id;\n  if (!id) {\n    return {\n      statusCode: 400,\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ error: \"Missing artwork ID\" }),\n    };\n  }\n\n  return fetch(\n    `https://collectionapi.metmuseum.org/public/collection/v1/objects/${id}`\n  )\n    .then((res) => {\n      if (!res.ok) {\n        return {\n          statusCode: res.status,\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({ error: `Met API error ${res.status}` }),\n        };\n      }\n      return res.json().then((data) => {\n        if (\n          !data ||\n          !data.objectID ||\n          (!data.primaryImage && !data.primaryImageSmall)\n        ) {\n          return {\n            statusCode: 204,\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify(null),\n          };\n        }\n        return {\n          statusCode: 200,\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify(data),\n        };\n      });\n    })\n    .catch((error) => {\n      return {\n        statusCode: 500,\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          error: \"Failed to fetch Met artwork\",\n          details: error.message,\n        }),\n      };\n    });\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,eAAsB,QAAQ,OAAO;AACnC,QAAM,KAAK,MAAM,uBAAuB;AACxC,MAAI,CAAC,IAAI;AACP,WAAO;AAAA,MACL,YAAY;AAAA,MACZ,SAAS,EAAE,gBAAgB,mBAAmB;AAAA,MAC9C,MAAM,KAAK,UAAU,EAAE,OAAO,qBAAqB,CAAC;AAAA,IACtD;AAAA,EACF;AAEA,SAAO;AAAA,IACL,oEAAoE,EAAE;AAAA,EACxE,EACG,KAAK,CAAC,QAAQ;AACb,QAAI,CAAC,IAAI,IAAI;AACX,aAAO;AAAA,QACL,YAAY,IAAI;AAAA,QAChB,SAAS,EAAE,gBAAgB,mBAAmB;AAAA,QAC9C,MAAM,KAAK,UAAU,EAAE,OAAO,iBAAiB,IAAI,MAAM,GAAG,CAAC;AAAA,MAC/D;AAAA,IACF;AACA,WAAO,IAAI,KAAK,EAAE,KAAK,CAAC,SAAS;AAC/B,UACE,CAAC,QACD,CAAC,KAAK,YACL,CAAC,KAAK,gBAAgB,CAAC,KAAK,mBAC7B;AACA,eAAO;AAAA,UACL,YAAY;AAAA,UACZ,SAAS,EAAE,gBAAgB,mBAAmB;AAAA,UAC9C,MAAM,KAAK,UAAU,IAAI;AAAA,QAC3B;AAAA,MACF;AACA,aAAO;AAAA,QACL,YAAY;AAAA,QACZ,SAAS,EAAE,gBAAgB,mBAAmB;AAAA,QAC9C,MAAM,KAAK,UAAU,IAAI;AAAA,MAC3B;AAAA,IACF,CAAC;AAAA,EACH,CAAC,EACA,MAAM,CAAC,UAAU;AAChB,WAAO;AAAA,MACL,YAAY;AAAA,MACZ,SAAS,EAAE,gBAAgB,mBAAmB;AAAA,MAC9C,MAAM,KAAK,UAAU;AAAA,QACnB,OAAO;AAAA,QACP,SAAS,MAAM;AAAA,MACjB,CAAC;AAAA,IACH;AAAA,EACF,CAAC;AACL;",
  "names": []
}
